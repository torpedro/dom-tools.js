var DomListener=function(){function a(a,b,c){var d=this;this.selector=a,this.callback=b,this.root="undefined"==typeof c?document:c;for(var e=c.querySelectorAll(a),f=0;f<e.length;++f)b(e[f]);this.observer=new MutationObserver(function(a,b){d.onDomMutations(a)}),this.observer.observe(c,{childList:!0,subtree:!0})}return a.prototype.destroy=function(){this.observer.disconnect()},a.prototype.onDomMutations=function(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<c.addedNodes.length;++d){var e=c.addedNodes[d];this.onNodeAdded(e)}},a.prototype.onNodeAdded=function(a){if(a.nodeType===Node.ELEMENT_NODE){var b=a;if(b.matches)b.matches(this.selector)&&this.callback(b);else for(var c=b.parentElement.querySelectorAll(this.selector),d=0;d<c.length;++d)if(c[d]===b){this.callback(b);break}for(var e=b.querySelectorAll(this.selector),f=0;f<e.length;++f)this.callback(e[f])}},a}();